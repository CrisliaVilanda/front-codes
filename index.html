<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda App</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-light">

    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="#"><i class="bi bi-calendar-event me-2"></i>Minha
                Agenda</a>

            <div class="d-flex align-items-center gap-2">
                <button class="btn btn-success" id="newScheduleBtn">
                    <i class="bi bi-plus-lg me-1"></i> Novo Agendamento
                </button>
                <button class="btn btn-outline-primary" id="newHearingBtn"><i class="bi bi-gavel me-1"></i> Cadastrar
                    audiência</button>
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="createEventDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-plus-lg me-1"></i> Cadastrar atividade extrajudicial / adicionar observações
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="createEventDropdown">
                        <li><a class="dropdown-item" href="#" id="newEventSimple"><i
                                    class="bi bi-file-earmark-text me-2"></i>Agendar atividade Extrajud.</a></li>
                        <li><a class="dropdown-item" href="#" id="newEventDetailed"><i
                                    class="bi bi-pin-angle me-2"></i>Adicionar observações e imprevistos</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <aside id="appSidebar" class="app-sidebar collapsed" role="complementary" aria-label="Menu lateral do aplicativo"
        tabindex="0">
        <div class="brand">
            <i class="bi bi-calendar-event fs-4 text-primary" aria-hidden="true"></i>
            <span class="brand-text sidebar-label">Agenda</span>
            <button id="sidebarToggle" class="ms-auto" aria-expanded="false" aria-controls="appSidebar"
                title="Alternar menu"><i class="bi bi-list" aria-hidden="true"></i><span
                    class="visually-hidden">Alternar menu</span></button>
        </div>
        <nav class="nav" aria-label="Navegação principal">
            <a href="index.html#minhaAgenda" class="nav-link sidebar-link" id="sidebarCalendar"><i
                    class="bi bi-calendar2-event"></i><span class="sidebar-label"> Calendário</span></a>
            <a href="index.html#calendarGrid2" class="nav-link"><i class="bi bi-gavel"></i><span class="sidebar-label">
                    Minhas audiências</span></a>
            <a href="observacoes.html" class="nav-link"><i class="bi bi-pin-angle"></i><span class="sidebar-label">
                    Observações</span></a>
            <a href="index.html#eventDetails" class="nav-link"><i class="bi bi-info-circle"></i><span
                    class="sidebar-label"> Detalhes</span></a>
        </nav>
    </aside>

    <div class="container">
        <div class="row mb-3">
            <div class="col-lg-6">
                <h3 class="h5 mb-3 fw-bold">Meus Atendimentos</h3>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <button class="btn btn-outline-secondary" id="prevMonth"><i class="bi bi-chevron-left"></i>
                        Anterior</button>
                    <h3 class="h5 mb-0 fw-bold text-capitalize" id="currentMonthYear">Janeiro 2026</h3>
                    <button class="btn btn-outline-secondary" id="nextMonth">Próximo <i
                            class="bi bi-chevron-right"></i></button>
                </div>
            </div>
            <div class="col-lg-6">
                <h3 class="h5 mb-3 fw-bold">Minhas Audiências</h3>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <button class="btn btn-outline-secondary" id="prevMonth2"><i class="bi bi-chevron-left"></i>
                        Anterior</button>
                    <h3 class="h5 mb-0 fw-bold text-capitalize" id="currentMonthYear2">Fevereiro 2026</h3>
                    <button class="btn btn-outline-secondary" id="nextMonth2">Próximo <i
                            class="bi bi-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="card shadow-sm border-0 mb-4">
                    <div class="card-body p-0">
                        <div class="calendar-header d-flex text-center bg-light py-2 fw-bold text-muted border-bottom">
                            <div class="flex-fill">Dom</div>
                            <div class="flex-fill">Seg</div>
                            <div class="flex-fill">Ter</div>
                            <div class="flex-fill">Qua</div>
                            <div class="flex-fill">Qui</div>
                            <div class="flex-fill">Sex</div>
                            <div class="flex-fill">Sab</div>
                        </div>
                        <div id="calendarGrid" class="calendar-grid">
                            <!-- Calendar days will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card shadow-sm border-0 mb-4">
                    <div class="card-body p-0">
                        <div class="calendar-header d-flex text-center bg-light py-2 fw-bold text-muted border-bottom">
                            <div class="flex-fill">Dom</div>
                            <div class="flex-fill">Seg</div>
                            <div class="flex-fill">Ter</div>
                            <div class="flex-fill">Qua</div>
                            <div class="flex-fill">Qui</div>
                            <div class="flex-fill">Sex</div>
                            <div class="flex-fill">Sab</div>
                        </div>
                        <div id="calendarGrid2" class="calendar-grid">
                            <!-- Calendar days will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detalhes do evento (exibido ao clicar em um badge) -->
        <div class="row mb-4">
            <div class="col-12">
                <div id="eventDetails" class="card shadow-sm border-0 d-none" aria-live="polite">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="mb-0" id="eventDetailsTitle">Detalhes do evento</h5>
                            <small class="text-muted" id="eventDetailsDate"></small>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-outline-secondary btn-sm" id="closeDetailsBtn">Fechar</button>
                            <button class="btn btn-outline-primary btn-sm d-none" id="saveStatusBtn"
                                aria-hidden="true"><i class="bi bi-pencil-square me-1"></i> Salvar status</button>
                            <button class="btn btn-danger btn-sm" id="deleteEventBtn"><i class="bi bi-trash"></i>
                                Excluir</button>
                        </div>
                    </div>
                    <div class="card-body" id="eventDetailsBody">
                        <div class="text-muted">Clique em um evento na agenda para ver os detalhes aqui.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Novo Agendamento -->
        <div class="modal fade" id="scheduleModal" tabindex="-1" aria-labelledby="scheduleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title" id="scheduleModalLabel"><i class="bi bi-calendar-plus me-2"></i>Novo
                            Agendamento</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="scheduleForm">
                            <div class="mb-3">
                                <label for="scheduleDate" class="form-label">Data <span
                                        class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="scheduleDate" required>
                            </div>
                            <div class="mb-3">
                                <label for="scheduleTime" class="form-label">Hora <span
                                        class="text-danger">*</span></label>
                                <input type="time" class="form-control" id="scheduleTime" required>
                            </div>
                            <div class="mb-3">
                                <label for="defenderName" class="form-label">Nome do Defensor <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="defenderName"
                                    placeholder="Digite o nome do defensor" required>
                            </div>
                            <div class="mb-3">
                                <label for="assistedSelect" class="form-label">Assistido <span
                                        class="text-danger">*</span></label>
                                <select class="form-select" id="assistedSelect" required>
                                    <option value="">-- Selecione um assistido --</option>
                                    <option value="João Silva">João Silva</option>
                                    <option value="Maria Santos">Maria Santos</option>
                                    <option value="Pedro Oliveira">Pedro Oliveira</option>
                                    <option value="Ana Costa">Ana Costa</option>
                                    <option value="Lucas Ferreira">Lucas Ferreira</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="scheduleProcess" class="form-label">Número do processo (opcional)</label>
                                <input type="text" class="form-control" id="scheduleProcess"
                                    placeholder="0000000-00.0000.0.00.0000">
                                <div class="form-text">Campo opcional — informe o número do processo se houver.</div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-success" id="saveScheduleBtn"><i
                                class="bi bi-check-circle me-1"></i>Salvar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Nova Atividade Extrajudicial -->
        <div class="modal fade" id="activityModal" tabindex="-1" aria-labelledby="activityModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info text-white">
                        <h5 class="modal-title" id="activityModalLabel"><i class="bi bi-file-earmark-text me-2"></i>Nova
                            Atividade Extrajudicial</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="activityForm">
                            <div class="mb-3">
                                <label for="activitySpecies" class="form-label">Espécie <span
                                        class="text-danger">*</span></label>
                                <select class="form-select" id="activitySpecies" required>
                                    <option value="">-- Selecione a espécie --</option>
                                    <option value="Ordinário">Ordinário</option>
                                    <option value="Extraordinário">Extraordinário</option>
                                    <option value="Plantão">Plantão</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="activityTitularity" class="form-label">Titularidade/Designação <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="activityTitularity"
                                    placeholder="Digite a titularidade/designação" required>
                            </div>
                            <div class="mb-3">
                                <label for="activityNucleo" class="form-label">Núcleo <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="activityNucleo"
                                    placeholder="Digite o núcleo" required>
                            </div>
                            <div class="mb-3">
                                <label for="activityDate" class="form-label">Data da Atividade <span
                                        class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="activityDate" required>
                            </div>
                            <div class="mb-3">
                                <label for="activityDescription" class="form-label">Atividade <span
                                        class="text-danger">*</span></label>
                                <textarea class="form-control" id="activityDescription" rows="3"
                                    placeholder="Descreva a atividade" required></textarea>
                            </div>
                            <div class="alert alert-warning" role="alert">
                                <i class="bi bi-exclamation-triangle me-2"></i><strong>Atenção:</strong> Esta atividade
                                será cadastrada com status de <strong>a realizar</strong>.
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-info" id="saveActivityBtn"><i
                                class="bi bi-check-circle me-1"></i>Salvar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Cadastrar Audiência -->
        <div class="modal fade" id="hearingModal" tabindex="-1" aria-labelledby="hearingModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title" id="hearingModalLabel"><i class="bi bi-gavel me-2"></i>Cadastrar
                            Audiência</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="hearingForm">
                            <div class="mb-3">
                                <label for="hearingDate" class="form-label">Data <span
                                        class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="hearingDate" required>
                            </div>
                            <div class="mb-3">
                                <label for="hearingTime" class="form-label">Hora</label>
                                <input type="time" class="form-control" id="hearingTime">
                            </div>



                            <div class="mb-3">
                                <label for="hearingDefender" class="form-label">Nome do Defensor</label>
                                <input type="text" class="form-control" id="hearingDefender"
                                    placeholder="Digite o nome do defensor">
                            </div>
                            <div class="mb-3">
                                <label for="hearingProcess" class="form-label">Número do processo <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="hearingProcess"
                                    placeholder="0000000-00.0000.0.00.0000" required>
                            </div>
                            <div class="mb-3">
                                <label for="hearingDescription" class="form-label">Descrição</label>
                                <textarea class="form-control" id="hearingDescription" rows="2"
                                    placeholder="Informações adicionais"></textarea>
                            </div>

                            <div class="alert alert-warning small mb-3" role="alert">
                                <strong>Atenção:</strong> Esta atividade será cadastrada com status de <em>a
                                    realizar</em>.
                            </div>

                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="saveHearingBtn"><i
                                class="bi bi-check-circle me-1"></i>Salvar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Nota / Observações e Imprevistos -->
        <div class="modal fade" id="noteModal" tabindex="-1" aria-labelledby="noteModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-dark text-white">
                        <h5 class="modal-title" id="noteModalLabel"><i class="bi bi-pin-angle me-2"></i>Adicionar
                            Observação / Imprevisto</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="noteForm">
                            <div class="mb-3">
                                <label for="noteTitle" class="form-label">Título da nota <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="noteTitle" required>
                            </div>
                            <div class="mb-3">
                                <label for="noteDate" class="form-label">Data <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="noteDate" required>
                            </div>
                            <div class="mb-3">
                                <label for="noteTime" class="form-label">Hora</label>
                                <input type="time" class="form-control" id="noteTime">
                            </div>
                            <div class="mb-3">
                                <label for="noteDescription" class="form-label">Descrição</label>
                                <textarea class="form-control" id="noteDescription" rows="3"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-dark" id="saveNoteBtn"><i
                                class="bi bi-pin-angle-fill me-1"></i>Salvar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bootstrap Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
        <script src="js/script.js"></script>
        <script>
      (function(){
        const sidebar = document.getElementById('appSidebar');
        const toggle = document.getElementById('sidebarToggle');
        const link = document.querySelector('.sidebar-link');
        const container = document.querySelector('.container');
        if (!sidebar) return;

        const mq = window.matchMedia('(min-width:768px)');
        const saved = localStorage.getItem('sidebarExpanded');
        const defaultExpanded = mq.matches;
        let expanded = saved === null ? defaultExpanded : saved === 'true';

        function applyState() {
          sidebar.classList.toggle('expanded', expanded);
          sidebar.classList.toggle('collapsed', !expanded);
          if (toggle) toggle.setAttribute('aria-expanded', String(!!expanded));
          if (container) container.classList.toggle('with-sidebar', expanded && window.innerWidth >= 768);
        }
        applyState();

        function setSidebarExpanded(v) {
          expanded = !!v;
          localStorage.setItem('sidebarExpanded', String(expanded));
          applyState();
        }

        if (toggle) {
          toggle.addEventListener('click', (ev) => { ev.preventDefault(); setSidebarExpanded(!expanded); });
          toggle.addEventListener('keydown', (ev) => { if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); setSidebarExpanded(!expanded); } });
        }

        if (link) link.addEventListener('click', (ev) => { link.classList.add('active'); setTimeout(()=>link.classList.remove('active'),800); });

        try {
          const target = document.getElementById('minhaAgenda');
          if (target) {
            const io = new IntersectionObserver(entries => {
              entries.forEach(en => link.classList.toggle('active', en.isIntersecting));
            }, { threshold: 0.35 });
            io.observe(target);
          }
        } catch (e) { /* noop */ }

        document.addEventListener('keydown', (ev) => { if (ev.key === 'Escape' && window.innerWidth < 768 && expanded) setSidebarExpanded(false); });
      })();
    </script>
</body>

</html>